language: go
sudo: false
go:
- 1.12
#before_install:
#- go get github.com/mattn/goveralls
#- go get golang.org/x/tools/cmd/cover
script:
- GO111MODULE=on make
#- "$HOME/gopath/bin/goveralls -repotoken $COVERALLS_TOKEN"
before_deploy:
- go get -u github.com/laher/goxc
- mkdir -p $TRAVIS_BUILD_DIR/dist
- goxc -d=$TRAVIS_BUILD_DIR/dist -bc='darwin,linux,!arm,!386' -build-ldflags "-X main.gVersion=`git describe --tags --abbrev=0` -X main.gGitcommit=`git rev-parse --short HEAD` -X main.gGoversion=`go version | cut -d ' ' -f3 | sed 's/^go//'`" -tasks=clean-destination,xc,archive,rmbin
deploy:
  provider: releases
  skip_cleanup: true
  api_key: "$GITHUB_TOKEN"
  file_glob: true
  file: "$TRAVIS_BUILD_DIR/dist/**/*.{tar.gz,zip}"
  on:
    tags: true
    branch: master
    condition: "$TRAVIS_TAG =~ ^v[0-9].*$"
notifications:
  slack:
    secure: lc/Qq4QbUL3AhoGCh8Frfrt5Ihfl3/52qvZsJ70SN/I3XXVUNAG/edmQm2fDAcg/58Q9F3hrQt2FnpaGHhl/sKtKsC+T1lZjfM2eATHNE9/akMfGu+pU8+JCT7ff5sosKUeQPJTdwj7Uj95H5ShV88X3BEi+GvVUF7OEQHhVOobfpq89YLdPzRIDyNxksVR1l4eiX/HGzncV9+PwhTwA4cFuOaXX5ytja2JYku+uqH8eZAen0HmhmUQ7KlaJiItoSckbefNiG9QnTNsCgLJ1rcBpailJdVGHqOhiECes/vGmv3twmKC5jMNoGjxkIGm56l2vYd0dXRnZ9dG3DhZXJFjMZH726CYBqjZ+DvwFmuRNWx5u0KZn3ovWSXvA+mOmxbB9UmrozAN+JdH6n87/kMzfliC2pswW/bUTggMLGz0iIPf7MXZq4aCPUah6vvpVZRVWxSJPb0ByIuh9CswWGeN3tNPAikHbyqJDAxwy85yeIbYyTeuXjKOn17o+E6xRYukIK89im81I1RyAfXtI/tfRoisS91ifehT4kLRaX4xtkaY/eCURff7duIX3W5APofRDomt+gzhNYd14r4AcFz+oDPV6lgp6gGNDUqZTrloOJTzgSP+Pp5bSQ79KMO9vdFPXYqVWynYQa7zs+tPI3gX7GtY8D8YsiFE48IK5/7U=
env:
  global:
    secure: g+u4DbKiFDlaIka0oL/fRI9bMS+G7WJTJ8ZbbwSALxvxRQfa6SCUmSHPQQ8P9G54VYscjHpyNdTvY8mEkd4Q509zJ2LXdcBao/1osovWJvhpxh83Lew1EPBeQq4V/y1tFDxLfGzhpnXYrKowvqYwxlney+aoxhX+hSexpxZMh/CIcLKEYwuYuDLFX9cO6co2MRCpHak6qEhHxUt2eV8vTrT2auJDE+UKp3ZKEdv6Gd+LvmmrFeznyiH7VTlvqP8VeLNstN5UM687sQLLzrbyNxh0ZF7c8I7kHIgdZjrkdOw3u46bWhVL2OWZBc6l5pBHuP2kTukQheZ3Ry1853lA8lQ37gKG9cIHQD4UqCeG2gnnOuIl3Pgl5veRB9tKc8ZX4SQmOqewUCMqvKh031EliZKGjQ9i2KFisfq1Zv2zDtXM/sxnlxXHMq/lVAHXklok3jNuL7iR5s2wQdg84e2nbgfJkT1C3lo/Zc7Uu3RH3iEx4LWIpU/E9iLLa2/DeXot9mIuq7/0/hnSvxeXkgfkqU3y1M9ozU8bb2fwplNuh5lBrlJ7/M+WCRdkHGIQfScGjRSlTY5gJ7vsMyjf4NX/UTW+TGylVtFOC6CmIJfc+U616PSSoksSato5c3tO0DM9jj2t5GQr80r8CNSDkRuDEuTewXxK38kL6hZQaVrqBsE=
